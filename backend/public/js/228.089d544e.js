"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[228],{1228:function(e,r,s){s.r(r),s.d(r,{default:function(){return b}});var t=s(6768),i=s(4232);const n={class:"my-recipes-page"},l={key:0,class:"no-recipes"},c={key:1,class:"recipes-list"},a=["src"],o=["onClick"],u={key:2,class:"modal-overlay"},p={class:"modal-content"},d=["src"],k={class:"recipe-info-container"},m={class:"recipe-info-line"},h={class:"info-item"},v={class:"info-item"},g={class:"info-item"},L={class:"info-item"},f={class:"recipe-info-line"},_={class:"info-item"},y={class:"info-item"},C={class:"info-item"};function R(e,r,s,R,M,E){return(0,t.uX)(),(0,t.CE)("div",n,[r[13]||(r[13]=(0,t.Lk)("h2",null,"Mes recettes",-1)),0===M.recipes.length?((0,t.uX)(),(0,t.CE)("div",l,r[3]||(r[3]=[(0,t.Lk)("p",null,"Aucune recette n'a été enregistrée pour le moment.",-1)]))):((0,t.uX)(),(0,t.CE)("div",c,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(M.recipes,((e,r)=>((0,t.uX)(),(0,t.CE)("div",{key:e.recipe_id,class:"recipe-card"},[(0,t.Lk)("h3",null,(0,i.v_)(e.recipe_name),1),e.image_url?((0,t.uX)(),(0,t.CE)("img",{key:0,src:e.image_url,alt:"Image de la recette",class:"modal-recipe-image"},null,8,a)):(0,t.Q3)("",!0),(0,t.Lk)("button",{onClick:e=>E.openModal(r)},"Voir les détails",8,o)])))),128))])),M.showModal?((0,t.uX)(),(0,t.CE)("div",u,[(0,t.Lk)("div",p,[(0,t.Lk)("button",{class:"close-btn",onClick:r[0]||(r[0]=(...e)=>E.closeModal&&E.closeModal(...e))},"X"),(0,t.Lk)("h3",null,(0,i.v_)(M.currentRecipe.recipe_name),1),M.currentRecipe.image_url?((0,t.uX)(),(0,t.CE)("img",{key:0,src:M.currentRecipe.image_url,alt:"Image de la recette",class:"recipe-image"},null,8,d)):(0,t.Q3)("",!0),(0,t.Lk)("div",k,[(0,t.Lk)("div",m,[(0,t.Lk)("div",h,[r[4]||(r[4]=(0,t.Lk)("strong",null,"Généré par l'IA :",-1)),(0,t.eW)(" "+(0,i.v_)(M.currentRecipe.created_by_ai?"Oui":"Non"),1)]),(0,t.Lk)("div",v,[r[5]||(r[5]=(0,t.Lk)("strong",null,"Temps de préparation:",-1)),(0,t.eW)(" "+(0,i.v_)(M.currentRecipe.preparation_time),1)]),(0,t.Lk)("div",g,[r[6]||(r[6]=(0,t.Lk)("strong",null,"Difficulté:",-1)),(0,t.eW)(" "+(0,i.v_)(M.currentRecipe.difficulty),1)]),(0,t.Lk)("div",L,[r[7]||(r[7]=(0,t.Lk)("strong",null,"Nombre de personnes:",-1)),(0,t.eW)(" "+(0,i.v_)(M.currentRecipe.number_of_person),1)])]),(0,t.Lk)("div",f,[(0,t.Lk)("div",_,[r[8]||(r[8]=(0,t.Lk)("strong",null,"Cuisine:",-1)),(0,t.eW)(" "+(0,i.v_)(M.currentRecipe.cuisine_type),1)]),(0,t.Lk)("div",y,[r[9]||(r[9]=(0,t.Lk)("strong",null,"Type:",-1)),(0,t.eW)(" "+(0,i.v_)(M.currentRecipe.category_type),1)]),(0,t.Lk)("div",C,[r[10]||(r[10]=(0,t.Lk)("strong",null,"Sans allergène :",-1)),(0,t.eW)(" "+(0,i.v_)(M.currentRecipe.allergens_list?.join(", ")||"Pas de mention"),1)])])]),r[11]||(r[11]=(0,t.Lk)("h4",null,"Ingrédients",-1)),(0,t.Lk)("ul",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(M.currentRecipe.ingredients,((e,r)=>((0,t.uX)(),(0,t.CE)("li",{key:r},(0,i.v_)(e.quantity)+" "+(0,i.v_)(e.food_name),1)))),128))]),r[12]||(r[12]=(0,t.Lk)("h4",null,"Instructions",-1)),(0,t.Lk)("ol",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(E.formattedInstructionsArray,((e,r)=>((0,t.uX)(),(0,t.CE)("li",{key:r},(0,i.v_)(e),1)))),128))]),(0,t.Lk)("button",{onClick:r[1]||(r[1]=(...e)=>E.addToShoppingList&&E.addToShoppingList(...e))},"Ajouter à la liste des courses"),(0,t.Lk)("button",{onClick:r[2]||(r[2]=(...e)=>E.closeModal&&E.closeModal(...e))},"Fermer")])])):(0,t.Q3)("",!0)])}var M=s(4373),E={name:"MyRecipesPage",data(){return{recipes:[],showModal:!1,currentRecipe:null,errorMessage:""}},computed:{formattedInstructionsArray(){return this.currentRecipe?.instructions?this.currentRecipe.instructions.split("\n").filter((e=>""!==e.trim())):[]}},methods:{async fetchUserRecipes(){try{const e=await M.A.get("https://tfe-3483aa964321.herokuapp.com/recipes/user",{withCredentials:!0});this.recipes=e.data,this.errorMessage=""}catch(e){console.error("Erreur lors de la récupération des recettes utilisateur :",e),this.errorMessage="Une erreur est survenue lors de la récupération de vos recettes. Veuillez réessayer plus tard."}},async addToShoppingList(){try{const e=await M.A.post("https://tfe-3483aa964321.herokuapp.com/shopping-list/add",{recipeId:this.currentRecipe.recipe_id},{withCredentials:!0});alert(e.data.message)}catch(e){console.error("Erreur lors de l'ajout à la liste des courses:",e),alert("Une erreur est survenue.")}},openModal(e){this.currentRecipe=this.recipes[e],this.showModal=!0},closeModal(){this.showModal=!1,this.currentRecipe=null}},mounted(){this.fetchUserRecipes()}},X=s(1241);const I=(0,X.A)(E,[["render",R],["__scopeId","data-v-58ece1ee"]]);var b=I}}]);
//# sourceMappingURL=228.089d544e.js.map