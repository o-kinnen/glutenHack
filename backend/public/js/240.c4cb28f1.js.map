{"version":3,"file":"js/240.c4cb28f1.js","mappings":"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","sources":["webpack://frontend/./src/views/ResetPassword.vue","webpack://frontend/./src/views/ResetPassword.vue?9dd8"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <div class=\"card p-4 text-white\">\r\n            <h2 class=\"mb-4 text-center\">Réinitialiser le mot de passe</h2>\r\n            <Form v-if=\"tokenValid\" @submit=\"resetPassword\" class=\"resetPassword-form\">\r\n                <div class=\"mb-3\">\r\n                    <label for=\"password\" class=\"form-label\">Mot de passe</label>\r\n                    <Field \r\n                        id=\"password\" \r\n                        name=\"password\" \r\n                        type=\"password\" \r\n                        class=\"form-control\" \r\n                        v-model=\"password\"\r\n                        rules=\"required|min:8|passwordUppercase|passwordLowercase|passwordNumber|passwordSpecial|noSpaces\"\r\n                    />\r\n                    <ErrorMessage name=\"password\" class=\"text-danger\"/>\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                    <label for=\"confirmPassword\" class=\"form-label\">Répéter le mot de passe</label>\r\n                    <Field \r\n                        id=\"confirmPassword\" \r\n                        name=\"confirmPassword\" \r\n                        type=\"password\" \r\n                        class=\"form-control\" \r\n                        v-model=\"confirmPassword\"\r\n                        rules=\"required|matches:password\"\r\n                    />\r\n                    <ErrorMessage name=\"confirmPassword\" class=\"text-danger\"/>\r\n                </div>\r\n                <button type=\"submit\" class=\"button btn\">Réinitialiser le mot de passe</button>\r\n            </Form>\r\n            <div v-if=\"message\" :class=\"alertClass\" class=\"alert mt-3\">{{ message }}</div>\r\n        </div>\r\n    </div>\r\n</template>\r\n  \r\n<script>\r\nimport axios from 'axios';\r\nimport { defineRule } from 'vee-validate';\r\nimport { Form, Field, ErrorMessage } from 'vee-validate'; \r\ndefineRule('required', value => {\r\n    return value ? true : 'Veuillez remplir ce champ correctement.';\r\n});\r\ndefineRule('min', (value, [limit]) => {\r\n    if (value && value.length < limit) {\r\n        return `Veuillez remplir ce champ avec au moins ${limit} caractères.`;\r\n    }\r\n    return true;\r\n});\r\ndefineRule('matches', (value, [target], ctx) => {\r\n    return value === ctx.form[target] || 'Les mots de passe ne correspondent pas.';\r\n});\r\ndefineRule('passwordUppercase', (value) => {\r\n    return /[A-Z]/.test(value) || 'Le mot de passe doit contenir au moins une lettre majuscule.';\r\n});\r\ndefineRule('passwordLowercase', (value) => {\r\n    return /[a-z]/.test(value) || 'Le mot de passe doit contenir au moins une lettre minuscule.';\r\n});\r\ndefineRule('passwordNumber', (value) => {\r\n    return /[0-9]/.test(value) || 'Le mot de passe doit contenir au moins un chiffre.';\r\n});\r\ndefineRule('passwordSpecial', (value) => {\r\n    return /[!@#$%^&*(),.?\":{}|<>]/.test(value) || 'Le mot de passe doit contenir au moins un caractère spécial.';\r\n});\r\ndefineRule('noSpaces', (value) => {\r\n    return !/\\s/.test(value) || \"Le mot de passe ne doit pas contenir d'espaces.\";\r\n});\r\nexport default {\r\n    name: 'ResetPassword',\r\n    components: {\r\n        Form,\r\n        Field,\r\n        ErrorMessage,\r\n    },\r\n    data() {\r\n        return {\r\n            password: '',\r\n            confirmPassword: '',\r\n            message: '',\r\n            token: this.$route.query.token,\r\n            tokenValid: false\r\n        };\r\n    },\r\n    async created() {\r\n        try {\r\n            const { data } = await axios.get(`${process.env.VUE_APP_URL_BACKEND}/users/verify-reset-token`, {\r\n                params: { token: this.token },\r\n                withCredentials: true,\r\n            });\r\n            if (data.success) {\r\n                this.tokenValid = true;\r\n            } else {\r\n                this.message = 'Le lien de réinitialisation est invalide ou a expiré.';\r\n            }\r\n        } catch (error) {\r\n            this.handleError(error, 'Le lien de réinitialisation est invalide ou a expiré.');\r\n        }\r\n    },\r\n    computed: {\r\n        alertClass() {\r\n            return this.message.includes('succès') ? 'alert-success' : 'alert-danger';\r\n        }\r\n    },\r\n    methods: {\r\n        async resetPassword () {\r\n            try {\r\n                const { data } = await axios.post(`${process.env.VUE_APP_URL_BACKEND}/users/reset-password`, {\r\n                    token: this.token,\r\n                    newPassword: this.password,\r\n                }, {\r\n                    withCredentials: true,\r\n                });\r\n                \r\n                if (data.success) {\r\n                    this.message = 'Mot de passe réinitialisé avec succès. Vous pouvez maintenant vous connecter.';\r\n                    setTimeout(() => {\r\n                        this.$router.push('/login');\r\n                    }, 1500);\r\n                } else {\r\n                    this.message = 'Erreur lors de la réinitialisation du mot de passe.';\r\n                }\r\n            } catch (error) {\r\n                this.handleError(error, 'Erreur lors de la réinitialisation du mot de passe.');\r\n            }\r\n        },\r\n        handleError(error, userMessage) {\r\n            if (error.response && error.response.data && error.response.data.message) {\r\n                this.message = error.response.data.message;\r\n            } else {\r\n                this.message = userMessage;\r\n            }\r\n            if (process.env.NODE_ENV !== 'production') {\r\n                console.error('API Error:', error);\r\n            }\r\n        },\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.card {\r\n    background-color: #212121;\r\n    border: none;\r\n    border-radius: 8px;\r\n    width: 90%;\r\n    max-width: 400px;\r\n    padding: 20px;\r\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n.container {\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\nbutton.btn {\r\n    background-color: #BA9371;\r\n    color: white;\r\n    border: none;\r\n    transition: all 0.3s ease;\r\n}\r\nbutton.btn:hover {\r\n    background-color: #C56929;\r\n    transform: scale(1.05);\r\n    color: white;\r\n}\r\n.router-link {\r\n    text-decoration: none!important;\r\n    color: #ffffff;\r\n    transition: text-decoration 0.3s;\r\n}\r\n.router-link:hover {\r\n    text-decoration: underline!important;\r\n}\r\n</style>","import { render } from \"./ResetPassword.vue?vue&type=template&id=0c245f4e&scoped=true\"\nimport script from \"./ResetPassword.vue?vue&type=script&lang=js\"\nexport * from \"./ResetPassword.vue?vue&type=script&lang=js\"\n\nimport \"./ResetPassword.vue?vue&type=style&index=0&id=0c245f4e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0c245f4e\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$data","tokenValid","_createBlock","_component_Form","key","onSubmit","$options","resetPassword","default","_withCtx","_hoisted_3","for","_createVNode","_component_Field","id","name","type","modelValue","password","_cache","$event","rules","_component_ErrorMessage","_hoisted_4","confirmPassword","_","_createCommentVNode","message","_normalizeClass","alertClass","defineRule","value","limit","length","target","ctx","form","test","components","Form","Field","ErrorMessage","data","token","this","$route","query","created","axios","get","params","withCredentials","success","error","handleError","computed","includes","methods","post","newPassword","setTimeout","$router","push","userMessage","response","__exports__","render"],"sourceRoot":""}