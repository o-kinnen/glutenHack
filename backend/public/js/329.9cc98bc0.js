"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[329],{8329:function(e,s,a){a.r(s),a.d(s,{default:function(){return f}});var r=a(6768),t=a(4232);const o={class:"auth-page"},l={class:"container mt-5 text-center"},n={class:"row justify-content-center"},i={class:"card p-4 text-white"},d={class:"mb-3"},c={class:"mb-3"},m={key:0,class:"alert alert-danger mt-3"};function u(e,s,a,u,p,b){const g=(0,r.g2)("Field"),h=(0,r.g2)("ErrorMessage"),f=(0,r.g2)("Form"),k=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.Lk)("div",l,[(0,r.Lk)("div",n,[(0,r.Lk)("div",i,[s[7]||(s[7]=(0,r.Lk)("h2",{class:"mb-4"},"Se connecter",-1)),(0,r.bF)(f,{onSubmit:b.login},{default:(0,r.k6)((()=>[(0,r.Lk)("div",d,[s[2]||(s[2]=(0,r.Lk)("label",{for:"email",class:"form-label"},"Adresse mail",-1)),(0,r.bF)(g,{id:"email",name:"email",type:"email",class:"form-control",modelValue:p.email,"onUpdate:modelValue":s[0]||(s[0]=e=>p.email=e),rules:"required|email"},null,8,["modelValue"]),(0,r.bF)(h,{name:"email",class:"text-danger"})]),(0,r.Lk)("div",c,[s[3]||(s[3]=(0,r.Lk)("label",{for:"password",class:"form-label"},"Mot de passe",-1)),(0,r.bF)(g,{id:"password",name:"password",type:"password",class:"form-control",modelValue:p.password,"onUpdate:modelValue":s[1]||(s[1]=e=>p.password=e),rules:"required"},null,8,["modelValue"]),(0,r.bF)(h,{name:"password",class:"text-danger"})]),s[4]||(s[4]=(0,r.Lk)("button",{type:"submit",class:"btn btn-light btn-block mb-3"},"Se connecter",-1)),p.errorMessage?((0,r.uX)(),(0,r.CE)("div",m,(0,t.v_)(p.errorMessage),1)):(0,r.Q3)("",!0)])),_:1},8,["onSubmit"]),(0,r.bF)(k,{to:"/password",class:"router-link"},{default:(0,r.k6)((()=>s[5]||(s[5]=[(0,r.eW)("Mot de passe oublié ?")]))),_:1}),(0,r.bF)(k,{to:"/signup",class:"router-link"},{default:(0,r.k6)((()=>s[6]||(s[6]=[(0,r.eW)("Pas de compte ?")]))),_:1})])])])])}a(4114);var p=a(6343);(0,p.Km)("required",(e=>!!e||"Veuillez remplir ce champ correctement.")),(0,p.Km)("email",(e=>{const s=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return!!s.test(e)||"Le format de l'adresse mail est invalide."}));var b={name:"LoginPage",components:{Form:p.lV,Field:p.D0,ErrorMessage:p.Kw},data(){return{email:"",password:"",errorMessage:""}},methods:{async login(){try{const e=await fetch("https://tfe-3483aa964321.herokuapp.com/users/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:this.email,password:this.password})}),s=await e.json();e.ok?(this.$store.dispatch("login"),this.$router.push("/profile")):401===e.status?this.errorMessage="Mot de passe incorrect.":404===e.status?this.errorMessage="Compte non trouvé.":this.errorMessage=s.message||"Échec de la connexion. Veuillez vérifier votre email et votre mot de passe."}catch(e){this.errorMessage="Erreur lors de la communication avec le serveur. Veuillez réessayer plus tard."}}}},g=a(1241);const h=(0,g.A)(b,[["render",u]]);var f=h}}]);
//# sourceMappingURL=329.9cc98bc0.js.map