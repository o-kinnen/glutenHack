{"version":3,"file":"js/363.18e7fb94.js","mappings":"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","sources":["webpack://frontend/./src/views/ResetPassword.vue","webpack://frontend/./src/views/ResetPassword.vue?9dd8"],"sourcesContent":["<template>\r\n    <div class=\"container mt-5\">\r\n        <div class=\"row justify-content-center\">\r\n            <div class=\"col-md-6\">\r\n                <div class=\"card p-4\">\r\n                    <Form v-if=\"tokenValid\" @submit=\"resetPassword\" class=\"resetPassword-form\">\r\n                        <div class=\"mb-3\">\r\n                            <label for=\"password\" class=\"form-label\">Mot de passe</label>\r\n                            <Field \r\n                                id=\"password\" \r\n                                name=\"password\" \r\n                                type=\"password\" \r\n                                class=\"form-control\" \r\n                                v-model=\"password\"\r\n                                rules=\"required|min:8|passwordUppercase|passwordLowercase|passwordNumber|passwordSpecial|noSpaces\"\r\n                            />\r\n                            <ErrorMessage name=\"password\" class=\"text-danger\"/>\r\n                        </div>\r\n                        <div class=\"mb-3\">\r\n                            <label for=\"confirmPassword\" class=\"form-label\">Répéter le mot de passe</label>\r\n                            <Field \r\n                                id=\"confirmPassword\" \r\n                                name=\"confirmPassword\" \r\n                                type=\"password\" \r\n                                class=\"form-control\" \r\n                                v-model=\"confirmPassword\"\r\n                                rules=\"required|matches:password\"\r\n                            />\r\n                            <ErrorMessage name=\"confirmPassword\" class=\"text-danger\"/>\r\n                        </div>\r\n                        <button type=\"submit\" class=\"btn btn-primary w-100\">Réinitialiser le mot de passe</button>\r\n                    </Form>\r\n                    <div v-if=\"errorMessage\" class=\"alert alert-danger mt-3\">{{ errorMessage }}</div>\r\n                    <div v-if=\"successMessage\" class=\"alert alert-success mt-3\">{{ successMessage }}</div>\r\n                    <div v-if=\"!tokenValid && !successMessage\" class=\"alert alert-danger mt-3\">\r\n                        Le lien de réinitialisation est invalide ou a expiré.\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n  \r\n<script>\r\nimport { defineRule } from 'vee-validate';\r\nimport { Form, Field, ErrorMessage } from 'vee-validate';\r\n  \r\ndefineRule('required', value => {\r\n    return value ? true : 'Veuillez remplir ce champ correctement.';\r\n});\r\ndefineRule('min', (value, [limit]) => {\r\n    if (value && value.length < limit) {\r\n        return `Veuillez remplir ce champ avec au moins ${limit} caractères.`;\r\n    }\r\n    return true;\r\n});\r\ndefineRule('matches', (value, [target], ctx) => {\r\n    return value === ctx.form[target] || 'Les mots de passe ne correspondent pas.';\r\n});\r\ndefineRule('passwordUppercase', (value) => {\r\n    return /[A-Z]/.test(value) || 'Le mot de passe doit contenir au moins une lettre majuscule.';\r\n});\r\ndefineRule('passwordLowercase', (value) => {\r\n    return /[a-z]/.test(value) || 'Le mot de passe doit contenir au moins une lettre minuscule.';\r\n});\r\ndefineRule('passwordNumber', (value) => {\r\n    return /[0-9]/.test(value) || 'Le mot de passe doit contenir au moins un chiffre.';\r\n});\r\ndefineRule('passwordSpecial', (value) => {\r\n    return /[!@#$%^&*(),.?\":{}|<>]/.test(value) || 'Le mot de passe doit contenir au moins un caractère spécial.';\r\n});\r\ndefineRule('noSpaces', (value) => {\r\n    return !/\\s/.test(value) || \"Le mot de passe ne doit pas contenir d'espaces.\";\r\n});\r\n  \r\nexport default {\r\n    name: 'ResetPassword',\r\n    components: {\r\n        Form,\r\n        Field,\r\n        ErrorMessage,\r\n    },\r\n    data() {\r\n        return {\r\n            password: '',\r\n            confirmPassword: '',\r\n            errorMessage: '',\r\n            successMessage: '',\r\n            token: this.$route.query.token,\r\n            tokenValid: false\r\n        };\r\n    },\r\n    async created() {\r\n        try {\r\n            const response = await fetch(`${process.env.VUE_APP_URL_BACKEND}/users/verify-reset-token?token=${this.token}`);\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                this.tokenValid = true;\r\n            } else {\r\n                this.errorMessage = data.message || 'Le lien de réinitialisation est invalide ou a expiré.';\r\n            }\r\n        } catch (error) {\r\n            this.errorMessage = 'Erreur lors de la vérification du token. Veuillez réessayer plus tard.';\r\n        }\r\n    },\r\n    methods: {\r\n        async resetPassword () {\r\n            try {\r\n                const response = await fetch(`${process.env.VUE_APP_URL_BACKEND}/users/reset-password`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    token: this.token,\r\n                    newPassword: this.password\r\n                }),\r\n                credentials: 'include'\r\n                })\r\n                const data = await response.json()\r\n                if (data.success) {\r\n                    this.successMessage = 'Mot de passe réinitialisé avec succès. Vous pouvez maintenant vous connecter.'\r\n                    setTimeout(() => {\r\n                    this.$router.push('/login')\r\n                }, 1500)\r\n                } else {\r\n                    this.errorMessage = data.message || 'Erreur lors de la réinitialisation du mot de passe.'\r\n                }\r\n            } catch (error) {\r\n                this.errorMessage = 'Erreur lors de la communication avec le serveur. Veuillez réessayer plus tard.'\r\n            }\r\n        } \r\n    }\r\n}\r\n</script>","import { render } from \"./ResetPassword.vue?vue&type=template&id=5846e52d\"\nimport script from \"./ResetPassword.vue?vue&type=script&lang=js\"\nexport * from \"./ResetPassword.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","$data","tokenValid","_createBlock","_component_Form","onSubmit","$options","resetPassword","default","_withCtx","_hoisted_5","for","_createVNode","_component_Field","id","name","type","modelValue","password","_cache","$event","rules","_component_ErrorMessage","_hoisted_6","confirmPassword","_","_createCommentVNode","errorMessage","_hoisted_7","_toDisplayString","successMessage","_hoisted_8","_hoisted_9","defineRule","value","limit","length","target","ctx","form","test","components","Form","Field","ErrorMessage","data","token","this","$route","query","created","response","fetch","json","success","message","error","methods","method","headers","body","JSON","stringify","newPassword","credentials","setTimeout","$router","push","__exports__","render"],"sourceRoot":""}