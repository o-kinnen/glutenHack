"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[437],{8437:function(e,i,t){t.d(i,{A:function(){return oe}});var o=t(6768),a=t(5130),l=t(4232);const n={class:"modal-content"},r={key:0},s={key:1},c={class:"form-group"},p={key:0,class:"error-text"},u={class:"form-group"},d={class:"image-preview"},m=["src"],g={key:0,class:"error-text"},k={class:"form-grid"},b={class:"form-group"},v={key:0,class:"error-text"},h={class:"form-group"},L={key:0,class:"error-text"},y={class:"form-group"},_={key:0,class:"error-text"},f={class:"form-group"},R={key:0,class:"error-text"},x={class:"form-group"},C={key:0,class:"error-text"},I={class:"form-group"},U=["onUpdate:modelValue"],V=["onUpdate:modelValue"],E={class:"modal-actions-icons"},A=["onClick"],M={key:0,class:"error-text"},j={class:"form-group"},q={class:"instruction-number"},X=["onUpdate:modelValue"],F={class:"modal-actions-icons"},z=["onClick"],H={key:0,class:"error-text"},Q={class:"form-group"},W={class:"checkbox-group"},P={class:"checkbox-item"},S={class:"checkbox-item"},w={class:"checkbox-item"},J={class:"checkbox-item"},O={class:"checkbox-item"},D={class:"checkbox-item"},G={class:"checkbox-item"},T={class:"checkbox-item"},N={class:"checkbox-item"},$={class:"checkbox-item"},B={class:"form-group"},K={class:"action-buttons"},Y={type:"submit",class:"button"};function Z(e,i,t,Z,ee,ie){return t.isVisible?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"modal-overlay",onClick:i[22]||(i[22]=(0,a.D$)(((...e)=>ie.closeModal&&ie.closeModal(...e)),["self"]))},[(0,o.Lk)("div",n,["create"===t.mode?((0,o.uX)(),(0,o.CE)("h3",r,"Créer une recette")):((0,o.uX)(),(0,o.CE)("h3",s,"Modifier la recette")),(0,o.Lk)("form",{onSubmit:i[21]||(i[21]=(0,a.D$)(((...e)=>ie.validateForm&&ie.validateForm(...e)),["prevent"]))},[(0,o.Lk)("div",c,[i[23]||(i[23]=(0,o.Lk)("label",{for:"recipe-title"},"Titre de la recette : ",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"recipe-title","onUpdate:modelValue":i[0]||(i[0]=e=>ee.localRecipe.recipe_name=e)},null,512),[[a.Jo,ee.localRecipe.recipe_name]]),ee.errors.recipe_name?((0,o.uX)(),(0,o.CE)("span",p,(0,l.v_)(ee.errors.recipe_name),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",u,[i[24]||(i[24]=(0,o.Lk)("label",{for:"recipe-photo"},"Photo de la recette",-1)),(0,o.Lk)("input",{type:"file",id:"recipe-photo",onChange:i[1]||(i[1]=(...e)=>ie.handleFileUpload&&ie.handleFileUpload(...e)),name:"image",accept:".png, .jpg, .jpeg"},null,32),(0,o.Lk)("div",d,[(0,o.Lk)("img",{src:ee.previewImage||ee.localRecipe.image_url||ee.defaultImage,alt:"Aperçu de l'image"},null,8,m)]),ee.errors.image?((0,o.uX)(),(0,o.CE)("span",g,(0,l.v_)(ee.errors.image),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",k,[(0,o.Lk)("div",b,[i[26]||(i[26]=(0,o.Lk)("label",{for:"recipe-preparation-time"},"Préparation : ",-1)),(0,o.bo)((0,o.Lk)("select",{id:"recipe-preparation-time","onUpdate:modelValue":i[2]||(i[2]=e=>ee.localRecipe.preparation_time=e)},i[25]||(i[25]=[(0,o.Lk)("option",{value:""},"Choisissez une option",-1),(0,o.Lk)("option",{value:"Rapide"},"Rapide",-1),(0,o.Lk)("option",{value:"Moyen"},"Moyen",-1),(0,o.Lk)("option",{value:"Long"},"Long",-1)]),512),[[a.u1,ee.localRecipe.preparation_time]]),ee.errors.preparation_time?((0,o.uX)(),(0,o.CE)("span",v,(0,l.v_)(ee.errors.preparation_time),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",h,[i[28]||(i[28]=(0,o.Lk)("label",{for:"recipe-difficulty"},"Difficulté : ",-1)),(0,o.bo)((0,o.Lk)("select",{id:"recipe-difficulty","onUpdate:modelValue":i[3]||(i[3]=e=>ee.localRecipe.difficulty=e)},i[27]||(i[27]=[(0,o.Lk)("option",{value:""},"Choisissez une option",-1),(0,o.Lk)("option",{value:"Facile"},"Facile",-1),(0,o.Lk)("option",{value:"Intermédiaire"},"Intermédiaire",-1),(0,o.Lk)("option",{value:"Complexe"},"Complexe",-1)]),512),[[a.u1,ee.localRecipe.difficulty]]),ee.errors.difficulty?((0,o.uX)(),(0,o.CE)("span",L,(0,l.v_)(ee.errors.difficulty),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",y,[i[29]||(i[29]=(0,o.Lk)("label",{for:"recipe-people"},"Part(s) : ",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",id:"recipe-people","onUpdate:modelValue":i[4]||(i[4]=e=>ee.localRecipe.number_of_person=e),min:"1",max:"8"},null,512),[[a.Jo,ee.localRecipe.number_of_person]]),ee.errors.number_of_person?((0,o.uX)(),(0,o.CE)("span",_,(0,l.v_)(ee.errors.number_of_person),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",f,[i[31]||(i[31]=(0,o.Lk)("label",{for:"recipe-cuisine"},"Cuisine : ",-1)),(0,o.bo)((0,o.Lk)("select",{id:"recipe-cuisine","onUpdate:modelValue":i[5]||(i[5]=e=>ee.localRecipe.cuisine_type=e)},i[30]||(i[30]=[(0,o.Fv)('<option value="" data-v-eba5525e>Choisissez une option</option><option value="Africaine" data-v-eba5525e>Africaine</option><option value="Asiatique" data-v-eba5525e>Asiatique</option><option value="Européenne" data-v-eba5525e>Européenne</option><option value="Américaine" data-v-eba5525e>Américaine</option><option value="Méditerranéenne" data-v-eba5525e>Méditerranéenne</option><option value="Indienne" data-v-eba5525e>Indienne</option><option value="Moyen-Orientale" data-v-eba5525e>Moyen-Orientale</option><option value="Mexicaine" data-v-eba5525e>Mexicaine</option><option value="Caribéenne" data-v-eba5525e>Caribéenne</option><option value="Italienne" data-v-eba5525e>Italienne</option><option value="Chinoise" data-v-eba5525e>Chinoise</option><option value="Japonaise" data-v-eba5525e>Japonaise</option><option value="Thaïlandaise" data-v-eba5525e>Thaïlandaise</option><option value="Coréenne" data-v-eba5525e>Coréenne</option><option value="Vietnamienne" data-v-eba5525e>Vietnamienne</option><option value="Espagnole" data-v-eba5525e>Espagnole</option><option value="Grecque" data-v-eba5525e>Grecque</option><option value="Française" data-v-eba5525e>Française</option><option value="Allemande" data-v-eba5525e>Allemande</option><option value="Nordique" data-v-eba5525e>Nordique</option><option value="Brésilienne" data-v-eba5525e>Brésilienne</option><option value="Argentine" data-v-eba5525e>Argentine</option><option value="Turque" data-v-eba5525e>Turque</option><option value="Marocaine" data-v-eba5525e>Marocaine</option><option value="Éthiopienne" data-v-eba5525e>Éthiopienne</option>',26)]),512),[[a.u1,ee.localRecipe.cuisine_type]]),ee.errors.cuisine_type?((0,o.uX)(),(0,o.CE)("span",R,(0,l.v_)(ee.errors.cuisine_type),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",x,[i[33]||(i[33]=(0,o.Lk)("label",{for:"recipe-type"},"Type : ",-1)),(0,o.bo)((0,o.Lk)("select",{id:"recipe-type","onUpdate:modelValue":i[6]||(i[6]=e=>ee.localRecipe.category_type=e)},i[32]||(i[32]=[(0,o.Fv)('<option value="" data-v-eba5525e>Choisissez une option</option><option value="Petit-déjeuner" data-v-eba5525e>Petit-déjeuner</option><option value="Lunch" data-v-eba5525e>Lunch</option><option value="Dîner" data-v-eba5525e>Dîner</option><option value="Dessert" data-v-eba5525e>Dessert</option>',5)]),512),[[a.u1,ee.localRecipe.category_type]]),ee.errors.category_type?((0,o.uX)(),(0,o.CE)("span",C,(0,l.v_)(ee.errors.category_type),1)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",I,[i[34]||(i[34]=(0,o.Lk)("label",null,"Ingrédients",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(ee.localRecipe.ingredients,((e,i)=>((0,o.uX)(),(0,o.CE)("div",{key:i,class:"ingredient-group"},[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":i=>e.food_name=i,placeholder:"Nom de l'ingrédient",class:"ingredient-input"},null,8,U),[[a.Jo,e.food_name]]),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":i=>e.quantity=i,placeholder:"Quantité",class:"ingredient-input"},null,8,V),[[a.Jo,e.quantity]]),(0,o.Lk)("div",E,[(0,o.Lk)("i",{class:"bi bi-trash-fill icon-action",onClick:e=>ie.removeIngredient(i),title:"Supprimer"},null,8,A)])])))),128)),(0,o.Lk)("button",{type:"button",onClick:i[7]||(i[7]=(...e)=>ie.addIngredient&&ie.addIngredient(...e)),class:"button"},"Ajouter un ingrédient"),ee.errors.ingredients?((0,o.uX)(),(0,o.CE)("span",M,(0,l.v_)(ee.errors.ingredients),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",j,[i[35]||(i[35]=(0,o.Lk)("label",null,"Instructions",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(ee.localRecipe.instructions,((e,i)=>((0,o.uX)(),(0,o.CE)("div",{key:i,class:"instruction-group"},[(0,o.Lk)("span",q,(0,l.v_)(i+1)+".",1),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":i=>e.step=i,placeholder:"Étape d'instruction",class:"instruction-textarea"},null,8,X),[[a.Jo,e.step]]),(0,o.Lk)("div",F,[(0,o.Lk)("i",{class:"bi bi-trash-fill icon-action",onClick:e=>ie.removeInstruction(i),title:"Supprimer"},null,8,z)])])))),128)),(0,o.Lk)("button",{type:"button",onClick:i[8]||(i[8]=(...e)=>ie.addInstruction&&ie.addInstruction(...e)),class:"button"},"Ajouter une étape"),ee.errors.instructions?((0,o.uX)(),(0,o.CE)("span",H,(0,l.v_)(ee.errors.instructions),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Q,[i[46]||(i[46]=(0,o.Lk)("label",null,"Sans allergène :",-1)),(0,o.Lk)("div",W,[(0,o.Lk)("label",P,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"Gluten","onUpdate:modelValue":i[9]||(i[9]=e=>ee.localRecipe.allergens_list=e)},null,512),[[a.lH,ee.localRecipe.allergens_list]]),i[36]||(i[36]=(0,o.Lk)("span",{class:"text-and-icon"},[(0,o.Lk)("img",{src:"/img/gluten.png",alt:"Icone",class:"restriction-icon"}),(0,o.eW)(" Gluten ")],-1))]),(0,o.Lk)("label",S,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"Lait","onUpdate:modelValue":i[10]||(i[10]=e=>ee.localRecipe.allergens_list=e)},null,512),[[a.lH,ee.localRecipe.allergens_list]]),i[37]||(i[37]=(0,o.Lk)("span",{class:"text-and-icon"},[(0,o.Lk)("img",{src:"/img/lait.png",alt:"Icone",class:"restriction-icon"}),(0,o.eW)(" Lait ")],-1))]),(0,o.Lk)("label",w,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"Oeufs","onUpdate:modelValue":i[11]||(i[11]=e=>ee.localRecipe.allergens_list=e)},null,512),[[a.lH,ee.localRecipe.allergens_list]]),i[38]||(i[38]=(0,o.Lk)("span",{class:"text-and-icon"},[(0,o.Lk)("img",{src:"/img/oeufs.png",alt:"Icone",class:"restriction-icon"}),(0,o.eW)(" Oeufs ")],-1))]),(0,o.Lk)("label",J,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"Arachide","onUpdate:modelValue":i[12]||(i[12]=e=>ee.localRecipe.allergens_list=e)},null,512),[[a.lH,ee.localRecipe.allergens_list]]),i[39]||(i[39]=(0,o.Lk)("span",{class:"text-and-icon"},[(0,o.Lk)("img",{src:"/img/arachide.png",alt:"Icone",class:"restriction-icon"}),(0,o.eW)(" Arachide ")],-1))]),(0,o.Lk)("label",O,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"Fruits à coque","onUpdate:modelValue":i[13]||(i[13]=e=>ee.localRecipe.allergens_list=e)},null,512),[[a.lH,ee.localRecipe.allergens_list]]),i[40]||(i[40]=(0,o.Lk)("span",{class:"text-and-icon"},[(0,o.Lk)("img",{src:"/img/noix.png",alt:"Icone",class:"restriction-icon"}),(0,o.eW)(" Noix ")],-1))]),(0,o.Lk)("label",D,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"Poissons","onUpdate:modelValue":i[14]||(i[14]=e=>ee.localRecipe.allergens_list=e)},null,512),[[a.lH,ee.localRecipe.allergens_list]]),i[41]||(i[41]=(0,o.Lk)("span",{class:"text-and-icon"},[(0,o.Lk)("img",{src:"/img/poissons.png",alt:"Icone",class:"restriction-icon"}),(0,o.eW)(" Poissons ")],-1))]),(0,o.Lk)("label",G,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"Soja","onUpdate:modelValue":i[15]||(i[15]=e=>ee.localRecipe.allergens_list=e)},null,512),[[a.lH,ee.localRecipe.allergens_list]]),i[42]||(i[42]=(0,o.Lk)("span",{class:"text-and-icon"},[(0,o.Lk)("img",{src:"/img/soja.png",alt:"Icone",class:"restriction-icon"}),(0,o.eW)(" Soja ")],-1))]),(0,o.Lk)("label",T,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"Crustacés","onUpdate:modelValue":i[16]||(i[16]=e=>ee.localRecipe.allergens_list=e)},null,512),[[a.lH,ee.localRecipe.allergens_list]]),i[43]||(i[43]=(0,o.Lk)("span",{class:"text-and-icon"},[(0,o.Lk)("img",{src:"/img/crustacés.png",alt:"Icone",class:"restriction-icon"}),(0,o.eW)(" Crustacés ")],-1))]),(0,o.Lk)("label",N,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"Moutarde","onUpdate:modelValue":i[17]||(i[17]=e=>ee.localRecipe.allergens_list=e)},null,512),[[a.lH,ee.localRecipe.allergens_list]]),i[44]||(i[44]=(0,o.Lk)("span",{class:"text-and-icon"},[(0,o.Lk)("img",{src:"/img/moutarde.png",alt:"Icone",class:"restriction-icon"}),(0,o.eW)(" Moutarde ")],-1))]),(0,o.Lk)("label",$,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:"Céleri","onUpdate:modelValue":i[18]||(i[18]=e=>ee.localRecipe.allergens_list=e)},null,512),[[a.lH,ee.localRecipe.allergens_list]]),i[45]||(i[45]=(0,o.Lk)("span",{class:"text-and-icon"},[(0,o.Lk)("img",{src:"/img/céleri.png",alt:"Icone",class:"restriction-icon"}),(0,o.eW)(" Céleri ")],-1))])])]),(0,o.Lk)("div",B,[(0,o.Lk)("label",null,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":i[19]||(i[19]=e=>ee.localRecipe.public=e)},null,512),[[a.lH,ee.localRecipe.public]]),i[47]||(i[47]=(0,o.eW)("Rendre cette recette publique "))])]),(0,o.Lk)("div",K,[(0,o.Lk)("button",Y,(0,l.v_)("create"===t.mode?"Créer la recette":"Modifier la recette"),1),(0,o.Lk)("button",{type:"button",onClick:i[20]||(i[20]=(...e)=>ie.closeModal&&ie.closeModal(...e)),class:"button"},"Annuler")])],32)])])):(0,o.Q3)("",!0)}t(4114),t(4603),t(7566),t(8721);var ee={name:"EditRecipe",props:{isVisible:{type:Boolean,default:!1},mode:{type:String,required:!0},recipe:{type:Object,default:()=>({})}},data(){return{localRecipe:{recipe_name:"",preparation_time:"",difficulty:"",number_of_person:1,cuisine_type:"",category_type:"",ingredients:[],instructions:[{step:""}],allergens_list:[],image:null,public:!1,image_url:null,removeImage:!1},previewImage:null,errors:{},defaultImage:"/img/food.png"}},watch:{recipe:{immediate:!0,handler(e){e&&Object.keys(e).length>0?(this.localRecipe={...e},this.previewImage=e.image_url||null,"string"===typeof e.instructions&&(this.localRecipe.instructions=e.instructions.split("\n").map((e=>({step:e.trim()}))))):(this.localRecipe={recipe_name:"",preparation_time:"",difficulty:"",number_of_person:1,cuisine_type:"",category_type:"",ingredients:[],instructions:[{step:""}],allergens_list:[],image:null,public:!1,removeImage:!1},this.previewImage=null)}}},methods:{handleError(e,i){console.error(i,e),alert(i)},validateForm(){try{this.errors={},this.localRecipe.recipe_name||(this.errors.recipe_name="Le titre est obligatoire."),this.localRecipe.preparation_time||(this.errors.preparation_time="Veuillez choisir un temps de préparation."),this.localRecipe.difficulty||(this.errors.difficulty="Veuillez choisir une difficulté."),(!this.localRecipe.number_of_person||this.localRecipe.number_of_person<1)&&(this.errors.number_of_person="Veuillez indiquer un nombre de personnes valide."),this.localRecipe.cuisine_type||(this.errors.cuisine_type="Veuillez choisir un type de cuisine."),this.localRecipe.category_type||(this.errors.category_type="Veuillez choisir une catégorie de recette."),this.localRecipe.ingredients.some((e=>e.food_name&&e.quantity))||(this.errors.ingredients="Veuillez ajouter au moins un ingrédient avec sa quantité."),this.localRecipe.instructions.some((e=>e.step))||(this.errors.instructions="Veuillez ajouter au moins une étape d'instruction."),0===this.localRecipe.allergens_list.length&&(this.localRecipe.allergens_list=["Pas de mention"]),this.localRecipe.removeImage=!this.localRecipe.image_url&&!this.localRecipe.image,0===Object.keys(this.errors).length&&this.handleSubmit()}catch(e){this.handleError(e,"Une erreur s'est produite lors de la validation du formulaire.")}},handleSubmit(){try{const e={...this.localRecipe};"create"===this.mode?this.$emit("create-recipe",e):"edit"===this.mode&&this.$emit("update-recipe",e),this.closeModal()}catch(e){this.handleError(e,"Une erreur s'est produite lors de l'envoi du formulaire.")}},closeModal(){this.$emit("close")},handleFileUpload(e){try{const i=e.target.files[0];if(i){const e=i.type;"image/png"===e||"image/jpeg"===e?(this.localRecipe.image=i,this.previewImage=URL.createObjectURL(i)):this.errors.image="Seuls les fichiers PNG et JPG sont acceptés."}}catch(i){this.handleError(i,"Une erreur s'est produite lors de l'ajout de l'image.")}},addIngredient(){try{Array.isArray(this.localRecipe.ingredients)||(this.localRecipe.ingredients=[]),this.localRecipe.ingredients.push({food_name:"",quantity:""})}catch(e){this.handleError(e,"Une erreur s'est produite lors de l'ajout d'un ingrédient.")}},removeIngredient(e){try{this.localRecipe.ingredients.splice(e,1)}catch(i){this.handleError(i,"Une erreur s'est produite lors de la suppression d'un ingrédient.")}},addInstruction(){try{Array.isArray(this.localRecipe.instructions)||(this.localRecipe.instructions=[]),this.localRecipe.instructions.push({step:""})}catch(e){this.handleError(e,"Une erreur s'est produite lors de l'ajout d'une instruction.")}},removeInstruction(e){try{this.localRecipe.instructions.splice(e,1)}catch(i){this.handleError(i,"Une erreur s'est produite lors de la suppression d'une instruction.")}}}},ie=t(1241);const te=(0,ie.A)(ee,[["render",Z],["__scopeId","data-v-eba5525e"]]);var oe=te}}]);
//# sourceMappingURL=437.6b719341.js.map