{"version":3,"file":"js/485.ced4e059.js","mappings":"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","sources":["webpack://frontend/./src/views/GroceryList.vue","webpack://frontend/./src/views/GroceryList.vue?46a7"],"sourcesContent":["<template>\r\n  <div class=\"grocery-container\">\r\n    <h1>Ma liste des courses</h1>\r\n    <ul class=\"grocery-list\">\r\n      <li v-for=\"(item, index) in shoppingItems\" :key=\"index\" class=\"grocery-item\">\r\n        <div class=\"grocery-details\">\r\n          <span class=\"food-name\">{{ item.food_name }}</span>\r\n          <span v-if=\"item.quantity\" class=\"food-quantity\">{{ item.quantity }}</span>\r\n          <span v-else class=\"food-quantity\">(pas de quantité définie)</span>\r\n        </div>\r\n        <div class=\"grocery-actions\">\r\n          <div v-if=\"item.quantity && isQuantityNumeric(item.quantity)\" class=\"update-section\">\r\n            <input type=\"number\" v-model.number=\"quantities[item.food_id]\" placeholder=\"Nouvelle quantité\" class=\"quantity-input\"/>\r\n            <button @click=\"updateQuantity(item.food_id, 'add')\" class=\"update-btn\">Ajouter</button>\r\n            <button @click=\"updateQuantity(item.food_id, 'subtract')\" class=\"subtract-btn\">Soustraire</button>\r\n          </div>\r\n          <span v-else-if=\"item.quantity\" class=\"non-modifiable\"></span>\r\n          <button @click=\"deleteItem(item.food_name)\" class=\"delete-btn\">Supprimer</button>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nexport default {\r\n  name: 'GroceryPage',\r\n  data() {\r\n    return {\r\n      shoppingItems: [],\r\n      quantities: {}\r\n    };\r\n  },\r\n  methods: {\r\n    async fetchShoppingList() {\r\n      try {\r\n        const response = await axios.get(`${process.env.VUE_APP_URL_BACKEND}/shopping-list/`, {\r\n          withCredentials: true,\r\n        });\r\n\r\n        this.listId = response.data.listId;\r\n        this.shoppingItems = response.data.items;\r\n\r\n        this.shoppingItems.forEach((item) => {\r\n          if (this.isQuantityNumeric(item.quantity)) {\r\n            const match = item.quantity.match(/^(\\d+)/);\r\n            this.quantities[item.food_id] = match ? parseInt(match[1], 10) : 0;\r\n          }\r\n        });\r\n      } catch (error) {\r\n        if (error.response && error.response.status === 404) {\r\n          alert('Aucune liste des courses trouvée.');\r\n        } else {\r\n        console.error('Erreur lors de la récupération de la liste des courses :', error);\r\n        }\r\n      }\r\n    },\r\n\r\n    async deleteItem(foodName) {\r\n      try {\r\n        await axios.delete(\r\n          `${process.env.VUE_APP_URL_BACKEND}/shopping-list/delete`,\r\n          {\r\n            params: { food_name: foodName },\r\n            withCredentials: true,\r\n          }\r\n        );\r\n\r\n        this.shoppingItems = this.shoppingItems.filter((item) => item.food_name !== foodName);\r\n      } catch (error) {\r\n        console.error(\"Erreur lors de la suppression de l'aliment :\", error);\r\n      }\r\n    },\r\n\r\n    async updateQuantity(foodId, action = 'add') {\r\n      const newQuantity = this.quantities[foodId];\r\n      if (newQuantity === undefined || newQuantity <= 0) {\r\n        alert(\"Veuillez entrer une quantité valide.\");\r\n        return;\r\n      }\r\n\r\n      const incrementValue = action === 'add' ? newQuantity : -newQuantity;\r\n\r\n      try {\r\n        const updatedItem = this.shoppingItems.find((item) => item.food_id === foodId);\r\n        if (updatedItem) {\r\n          const currentQuantity = parseInt(updatedItem.quantity.match(/^(\\d+)/)[1], 10);\r\n          if (action === 'subtract' && currentQuantity + incrementValue <= 0) {\r\n            alert(\"La quantité ne peut pas être égale à 0.\");\r\n            return;\r\n          }\r\n        }\r\n        const response = await axios.post(\r\n          `${process.env.VUE_APP_URL_BACKEND}/shopping-list/update-quantity`,\r\n          {\r\n            listId : this.listId,\r\n            foodId,\r\n            incrementValue,\r\n          },\r\n          {\r\n            withCredentials: true,\r\n          }\r\n        );\r\n\r\n        if (updatedItem) {\r\n          updatedItem.quantity = response.data.newQuantity;\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Erreur lors de la mise à jour de la quantité :\", error);\r\n      }\r\n    },\r\n\r\n    isQuantityNumeric(quantity) {\r\n      return /^\\d+/.test(quantity);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchShoppingList();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.grocery-container {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  background-color: #f8f9fa;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\r\n}\r\nh1 {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n  font-size: 2rem;\r\n  color: #343a40;\r\n}\r\n.grocery-list {\r\n  list-style-type: none;\r\n  padding: 0;\r\n}\r\n.grocery-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  padding: 15px;\r\n  margin-bottom: 10px;\r\n  background-color: #ffffff;\r\n  border-radius: 5px;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n}\r\n.food-name {\r\n  font-weight: bold;\r\n  color: #495057;\r\n  margin-bottom: 5px;\r\n  display: block;\r\n}\r\n.food-quantity {\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n}\r\n.grocery-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n.update-section {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n}\r\nbutton {\r\n  padding: 5px 10px;\r\n  font-size: 0.9rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n.update-btn {\r\n  background-color: #28a745;\r\n  color: white;\r\n}\r\n.update-btn:hover {\r\n  background-color: #218838;\r\n}\r\n.delete-btn {\r\n  background-color: #dc3545;\r\n  color: white;\r\n}\r\n.delete-btn:hover {\r\n  background-color: #c82333;\r\n}\r\n.quantity-input {\r\n  width: 80px;\r\n  padding: 5px;\r\n  border: 1px solid #ced4da;\r\n  border-radius: 4px;\r\n  font-size: 0.9rem;\r\n}\r\n.quantity-input:focus {\r\n  outline: none;\r\n  border-color: #80bdff;\r\n  box-shadow: 0 0 5px rgba(0, 123, 255, 0.25);\r\n}\r\n.non-modifiable {\r\n  font-style: italic;\r\n  color: #6c757d;\r\n}\r\n.subtract-btn {\r\n  background-color: #ffc107;\r\n  color: white;\r\n}\r\n.subtract-btn:hover {\r\n  background-color: #e0a800;\r\n}\r\n</style>\r\n","import { render } from \"./GroceryList.vue?vue&type=template&id=03a158f3&scoped=true\"\nimport script from \"./GroceryList.vue?vue&type=script&lang=js\"\nexport * from \"./GroceryList.vue?vue&type=script&lang=js\"\n\nimport \"./GroceryList.vue?vue&type=style&index=0&id=03a158f3&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-03a158f3\"]])\n\nexport default __exports__"],"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_Fragment","_renderList","$data","shoppingItems","item","index","_hoisted_3","_hoisted_4","_toDisplayString","food_name","quantity","_hoisted_5","_hoisted_6","_hoisted_7","$options","isQuantityNumeric","_hoisted_8","type","$event","quantities","food_id","placeholder","_hoisted_9","number","onClick","updateQuantity","_hoisted_10","_hoisted_11","_hoisted_12","_createCommentVNode","deleteItem","_hoisted_13","name","data","methods","fetchShoppingList","response","axios","get","withCredentials","this","listId","items","forEach","match","parseInt","error","status","alert","console","foodName","delete","params","filter","foodId","action","newQuantity","undefined","incrementValue","updatedItem","find","currentQuantity","post","test","mounted","__exports__","render"],"sourceRoot":""}