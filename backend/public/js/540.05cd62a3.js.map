{"version":3,"file":"js/540.05cd62a3.js","mappings":"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","sources":["webpack://frontend/./src/views/GroceryList.vue","webpack://frontend/./src/views/GroceryList.vue?46a7"],"sourcesContent":["<template>\r\n  <div class=\"grocery-container\">\r\n    <h1 class=\"text-white\">Ma liste des courses</h1>\r\n      <button @click=\"exportToFile\" class=\"button\">Exporter</button>\r\n    <ul class=\"grocery-list\">\r\n      <li v-for=\"(item, index) in shoppingItems\" :key=\"index\" class=\"grocery-item\">\r\n        <div class=\"grocery-details\">\r\n          <span class=\"food-name\">{{ item.food_name }}</span>\r\n          <span v-if=\"item.quantity\" class=\"food-quantity\">{{ item.quantity }}</span>\r\n          <span v-else class=\"food-quantity\">(pas de quantité définie)</span>\r\n        </div>\r\n        <div class=\"grocery-actions\">\r\n          <div v-if=\"item.quantity && isQuantityNumeric(item.quantity)\" class=\"update-section\">\r\n            <input type=\"number\" v-model.number=\"quantities[item.food_id]\" placeholder=\"Nouvelle quantité\" class=\"quantity-input\"/>\r\n            <button @click=\"updateQuantity(item.food_id, 'add')\" class=\"button\">Ajouter</button>\r\n            <button @click=\"updateQuantity(item.food_id, 'subtract')\" class=\"button\">Soustraire</button>\r\n          </div>\r\n          <span v-else-if=\"item.quantity\" class=\"non-modifiable\"></span>\r\n          <button @click=\"deleteItem(item.food_name)\" class=\"button\">Supprimer</button>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nexport default {\r\n  name: 'GroceryPage',\r\n  data() {\r\n    return {\r\n      shoppingItems: [],\r\n      quantities: {}\r\n    };\r\n  },\r\n  methods: {\r\n    async fetchShoppingList() {\r\n      try {\r\n        const response = await axios.get(`${process.env.VUE_APP_URL_BACKEND}/shopping-list/`, {\r\n          withCredentials: true,\r\n        });\r\n\r\n        this.listId = response.data.listId;\r\n        this.shoppingItems = response.data.items;\r\n\r\n        this.shoppingItems.forEach((item) => {\r\n          if (this.isQuantityNumeric(item.quantity)) {\r\n            const match = item.quantity.match(/^(\\d+)/);\r\n            this.quantities[item.food_id] = match ? parseInt(match[1], 10) : 0;\r\n          }\r\n        });\r\n      } catch (error) {\r\n        if (error.response && error.response.status === 404) {\r\n          console.error('Aucune liste des courses trouvée :', error);\r\n        } else {\r\n        console.error('Erreur lors de la récupération de la liste des courses :', error);\r\n        }\r\n      }\r\n    },\r\n    exportToFile() {\r\n      const title = \"Ma liste des courses\\n\\n\";\r\n      const items = this.shoppingItems.map((item) => {\r\n        return `- ${item.food_name} ${item.quantity ? `(${item.quantity})` : ''}`;\r\n      }).join('\\n');\r\n      const fileContent = title + items;\r\n\r\n      const blob = new Blob([fileContent], { type: 'text/plain' });\r\n      const link = document.createElement('a');\r\n      link.href = URL.createObjectURL(blob);\r\n      link.download = 'Ma_liste_des_courses.txt';\r\n      link.click();\r\n      URL.revokeObjectURL(link.href);\r\n    },\r\n    async deleteItem(foodName) {\r\n      try {\r\n        await axios.delete(\r\n          `${process.env.VUE_APP_URL_BACKEND}/shopping-list/delete`,\r\n          {\r\n            params: { food_name: foodName },\r\n            withCredentials: true,\r\n          }\r\n        );\r\n\r\n        this.shoppingItems = this.shoppingItems.filter((item) => item.food_name !== foodName);\r\n      } catch (error) {\r\n        console.error(\"Erreur lors de la suppression de l'aliment :\", error);\r\n      }\r\n    },\r\n\r\n    async updateQuantity(foodId, action = 'add') {\r\n      const newQuantity = this.quantities[foodId];\r\n      if (newQuantity === undefined || newQuantity <= 0) {\r\n        alert(\"Veuillez entrer une quantité valide.\");\r\n        return;\r\n      }\r\n\r\n      const incrementValue = action === 'add' ? newQuantity : -newQuantity;\r\n\r\n      try {\r\n        const updatedItem = this.shoppingItems.find((item) => item.food_id === foodId);\r\n        if (updatedItem) {\r\n          const currentQuantity = parseInt(updatedItem.quantity.match(/^(\\d+)/)[1], 10);\r\n          if (action === 'subtract' && currentQuantity + incrementValue <= 0) {\r\n            alert(\"La quantité ne peut pas être égale à 0.\");\r\n            return;\r\n          }\r\n        }\r\n        const response = await axios.post(\r\n          `${process.env.VUE_APP_URL_BACKEND}/shopping-list/update-quantity`,\r\n          {\r\n            listId : this.listId,\r\n            foodId,\r\n            incrementValue,\r\n          },\r\n          {\r\n            withCredentials: true,\r\n          }\r\n        );\r\n\r\n        if (updatedItem) {\r\n          updatedItem.quantity = response.data.newQuantity;\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Erreur lors de la mise à jour de la quantité :\", error);\r\n      }\r\n    },\r\n\r\n    isQuantityNumeric(quantity) {\r\n      return /^\\d+/.test(quantity);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.fetchShoppingList();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.grocery-container {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  background-color: #212121;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\r\n}\r\nh1 {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n  font-size: 2rem;\r\n  color: #343a40;\r\n}\r\n.grocery-list {\r\n  list-style-type: none;\r\n  padding: 0;\r\n}\r\n.grocery-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  padding: 15px;\r\n  margin-bottom: 10px;\r\n  background-color: #171717;\r\n  border: 1px solid #ddd;\r\n  border-radius: 5px;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n}\r\n.food-name {\r\n  font-weight: bold;\r\n  color: white;\r\n  margin-bottom: 5px;\r\n  display: block;\r\n}\r\n.food-quantity {\r\n  color: white;\r\n  font-size: 0.9rem;\r\n}\r\n.grocery-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n.update-section {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n}\r\nbutton {\r\n  padding: 5px 10px;\r\n  font-size: 0.9rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n.update-btn {\r\n  background-color: #28a745;\r\n  color: white;\r\n}\r\n.update-btn:hover {\r\n  background-color: #218838;\r\n}\r\n.delete-btn {\r\n  background-color: #dc3545;\r\n  color: white;\r\n}\r\n.delete-btn:hover {\r\n  background-color: #c82333;\r\n}\r\n.quantity-input {\r\n  width: 80px;\r\n  padding: 5px;\r\n  border: 1px solid #ced4da;\r\n  border-radius: 4px;\r\n  font-size: 0.9rem;\r\n}\r\n.quantity-input:focus {\r\n  outline: none;\r\n  border-color: #80bdff;\r\n  box-shadow: 0 0 5px rgba(0, 123, 255, 0.25);\r\n}\r\n.non-modifiable {\r\n  font-style: italic;\r\n  color: #6c757d;\r\n}\r\n.subtract-btn {\r\n  background-color: #ffc107;\r\n  color: white;\r\n}\r\n.subtract-btn:hover {\r\n  background-color: #e0a800;\r\n}\r\n.export-btn {\r\n  margin: 10px 0;\r\n  padding: 10px 15px;\r\n  font-size: 1rem;\r\n  background-color: #007bff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n.export-btn:hover {\r\n  background-color: #0056b3;\r\n}\r\nbutton {\r\n    background-color: #BA9371;\r\n    color: white;\r\n    border: none;\r\n    transition: all 0.3s ease;\r\n    border-radius: 4px;\r\n    padding: 10px;\r\n    width: auto;\r\n}\r\nbutton:hover {\r\n    background-color: #C56929;\r\n    transform: scale(1.05);\r\n    color: white;\r\n}\r\n</style>\r\n","import { render } from \"./GroceryList.vue?vue&type=template&id=5dc2d7ea&scoped=true\"\nimport script from \"./GroceryList.vue?vue&type=script&lang=js\"\nexport * from \"./GroceryList.vue?vue&type=script&lang=js\"\n\nimport \"./GroceryList.vue?vue&type=style&index=0&id=5dc2d7ea&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5dc2d7ea\"]])\n\nexport default __exports__"],"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","onClick","_cache","args","$options","exportToFile","_hoisted_2","_Fragment","_renderList","$data","shoppingItems","item","index","_hoisted_3","_hoisted_4","_toDisplayString","food_name","quantity","_hoisted_5","_hoisted_6","_hoisted_7","isQuantityNumeric","_hoisted_8","type","$event","quantities","food_id","placeholder","_hoisted_9","number","updateQuantity","_hoisted_10","_hoisted_11","_hoisted_12","_createCommentVNode","deleteItem","_hoisted_13","name","data","methods","fetchShoppingList","response","axios","get","withCredentials","this","listId","items","forEach","match","parseInt","error","status","console","title","map","join","fileContent","blob","Blob","link","document","createElement","href","URL","createObjectURL","download","click","revokeObjectURL","foodName","delete","params","filter","foodId","action","newQuantity","undefined","alert","incrementValue","updatedItem","find","currentQuantity","post","test","mounted","__exports__","render"],"sourceRoot":""}