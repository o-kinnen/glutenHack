"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[619],{5619:function(e,r,s){s.r(r),s.d(r,{default:function(){return h}});var a=s(6768),o=s(4232);const l={class:"container"},t={class:"card p-4 text-white"},n={class:"mb-3"},i={class:"mb-3"},d={key:0,class:"alert alert-danger mt-3"};function c(e,r,s,c,m,u){const p=(0,a.g2)("Field"),b=(0,a.g2)("ErrorMessage"),g=(0,a.g2)("Form"),h=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("div",t,[r[7]||(r[7]=(0,a.Lk)("h2",{class:"mb-4"},"Se connecter",-1)),(0,a.bF)(g,{onSubmit:u.login},{default:(0,a.k6)((()=>[(0,a.Lk)("div",n,[r[2]||(r[2]=(0,a.Lk)("label",{for:"email",class:"form-label"},"Adresse mail",-1)),(0,a.bF)(p,{id:"email",name:"email",type:"email",class:"form-control",modelValue:m.email,"onUpdate:modelValue":r[0]||(r[0]=e=>m.email=e),rules:"required|email"},null,8,["modelValue"]),(0,a.bF)(b,{name:"email",class:"text-danger"})]),(0,a.Lk)("div",i,[r[3]||(r[3]=(0,a.Lk)("label",{for:"password",class:"form-label"},"Mot de passe",-1)),(0,a.bF)(p,{id:"password",name:"password",type:"password",class:"form-control",modelValue:m.password,"onUpdate:modelValue":r[1]||(r[1]=e=>m.password=e),rules:"required"},null,8,["modelValue"]),(0,a.bF)(b,{name:"password",class:"text-danger"})]),r[4]||(r[4]=(0,a.Lk)("button",{type:"submit",class:"btn btn-light btn-block mb-3"},"Se connecter",-1)),m.errorMessage?((0,a.uX)(),(0,a.CE)("div",d,(0,o.v_)(m.errorMessage),1)):(0,a.Q3)("",!0)])),_:1},8,["onSubmit"]),(0,a.bF)(h,{to:"/password",class:"router-link"},{default:(0,a.k6)((()=>r[5]||(r[5]=[(0,a.eW)("Mot de passe oublié ?")]))),_:1}),(0,a.bF)(h,{to:"/signup",class:"router-link"},{default:(0,a.k6)((()=>r[6]||(r[6]=[(0,a.eW)("Pas de compte ?")]))),_:1})])])}s(4114);var m=s(6343),u=s(4373);(0,m.Km)("required",(e=>!!e||"Veuillez remplir ce champ correctement.")),(0,m.Km)("email",(e=>{const r=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return!!r.test(e)||"Le format de l'adresse mail est invalide."}));var p={name:"LoginPage",components:{Form:m.lV,Field:m.D0,ErrorMessage:m.Kw},data(){return{email:"",password:"",errorMessage:""}},methods:{async login(){try{await u.A.post("https://www.cookaller.com/users/login",{email:this.email,password:this.password},{withCredentials:!0}),this.$store.dispatch("login"),this.$router.push("/profile")}catch(e){e.response?401===e.response.status?this.errorMessage="Mot de passe incorrect.":404===e.response.status?this.errorMessage="Compte non trouvé.":this.errorMessage=e.response.data.message||"Échec de la connexion. Veuillez vérifier votre email et votre mot de passe.":this.errorMessage="Erreur lors de la communication avec le serveur. Veuillez réessayer plus tard.",this.errorHandler(e)}},errorHandler(e){console.error("Erreur :",e)}}},b=s(1241);const g=(0,b.A)(p,[["render",c]]);var h=g}}]);
//# sourceMappingURL=619.98189253.js.map