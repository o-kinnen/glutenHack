"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[642],{4642:function(e,r,t){t.r(r),t.d(r,{default:function(){return g}});var a=t(6768),l=t(5130),n=t(4232);const s={key:0,class:"resultat"},o={key:0},i=["src"],u={key:0},c={key:1},d={class:"source"};function m(e,r,t,m,p,f){return(0,a.uX)(),(0,a.CE)("div",null,[r[4]||(r[4]=(0,a.Lk)("h1",null,"Analyser un aliment",-1)),r[5]||(r[5]=(0,a.Lk)("p",null,"Recherchez un aliment en entrant son code-barre pour savoir s'il est sûr pour vous.",-1)),r[6]||(r[6]=(0,a.Lk)("label",{for:"codeBarreInput"},"Entrez un code-barre :",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"codeBarreInput","onUpdate:modelValue":r[0]||(r[0]=e=>p.codeBarre=e),placeholder:"Entrez un code-barre"},null,512),[[l.Jo,p.codeBarre]]),(0,a.Lk)("button",{onClick:r[1]||(r[1]=(...e)=>f.verifierAliment&&f.verifierAliment(...e)),class:"btn btn-primary w-5"},"Vérifier"),null!==p.resultat?((0,a.uX)(),(0,a.CE)("div",s,[(0,a.Lk)("p",null,[r[2]||(r[2]=(0,a.Lk)("strong",null,"Nom de l'aliment :",-1)),(0,a.eW)(" "+(0,n.v_)(p.resultat.nomAliment),1)]),p.resultat.imageUrl?((0,a.uX)(),(0,a.CE)("div",o,[r[3]||(r[3]=(0,a.Lk)("p",null,[(0,a.Lk)("strong",null,"Photo de l'aliment :")],-1)),(0,a.Lk)("img",{src:p.resultat.imageUrl,alt:"Photo de l'aliment",style:{"max-width":"200px",border:"1px solid #ccc"}},null,8,i),p.resultat.peutManger?((0,a.uX)(),(0,a.CE)("p",c," ✅ Cet aliment semble sûr pour vous. Aucun allergène de votre profil n'est mentionné. ")):((0,a.uX)(),(0,a.CE)("p",u," ⚠️ Cet aliment contient des allergènes problématiques pour vous : "+(0,n.v_)(p.resultat.allergenesProbleme.join(", ")),1)),(0,a.Lk)("p",d,[(0,a.Lk)("small",null,(0,n.v_)(p.resultat.source),1)])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])}var p=t(4373),f={name:"AnalysePage",data(){return{codeBarre:"",resultat:null}},methods:{async getUserRestrictions(){try{const e=await p.A.get("https://tfe-3483aa964321.herokuapp.com/users/restrictions",{withCredentials:!0});return(e.data.restrictions||[]).map((e=>e.toLowerCase()))}catch(e){return console.error("Erreur lors de la récupération des restrictions alimentaires :",e),alert("Impossible de récupérer les restrictions alimentaires. Veuillez réessayer."),[]}},async verifierAliment(){const e=this.codeBarre?this.codeBarre.trim():"";if(e)try{const r=await p.A.get("https://tfe-3483aa964321.herokuapp.com/api/food",{params:{codeBarre:e}}),t=r.data.allergenes||[],a=r.data.barcode_name||"Nom inconnu",l=r.data.imageUrl||"",n=r.data.source||"",s=await this.getUserRestrictions(),o=t.filter((e=>s.includes(e.toLowerCase())));this.resultat={nomAliment:a,imageUrl:l,allergenes:t,peutManger:0===o.length,allergenesProbleme:o,source:n}}catch(r){console.error("Erreur lors de la vérification de l'aliment :",r),alert("Une erreur est survenue lors de la vérification. Veuillez réessayer.")}else alert("Veuillez entrer un code-barre.")}}},h=t(1241);const k=(0,h.A)(f,[["render",m],["__scopeId","data-v-15f6affa"]]);var g=k}}]);
//# sourceMappingURL=642.3b01ceb5.js.map