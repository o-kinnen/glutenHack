"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[947],{3947:function(e,s,a){a.r(s),a.d(s,{default:function(){return h}});var t=a(6768),r=a(4232);const o={class:"container"},n={class:"card p-4 text-white"},i={class:"mb-3"},d={class:"mb-3"};function l(e,s,a,l,c,m){const p=(0,t.g2)("Field"),u=(0,t.g2)("ErrorMessage"),w=(0,t.g2)("Form");return(0,t.uX)(),(0,t.CE)("div",o,[(0,t.Lk)("div",n,[s[5]||(s[5]=(0,t.Lk)("h2",{class:"mb-4 text-center"},"Réinitialiser le mot de passe",-1)),c.tokenValid?((0,t.uX)(),(0,t.Wv)(w,{key:0,onSubmit:m.resetPassword,class:"resetPassword-form"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",i,[s[2]||(s[2]=(0,t.Lk)("label",{for:"password",class:"form-label"},"Mot de passe",-1)),(0,t.bF)(p,{id:"password",name:"password",type:"password",class:"form-control",modelValue:c.password,"onUpdate:modelValue":s[0]||(s[0]=e=>c.password=e),rules:"required|min:8|passwordUppercase|passwordLowercase|passwordNumber|passwordSpecial|noSpaces"},null,8,["modelValue"]),(0,t.bF)(u,{name:"password",class:"text-danger"})]),(0,t.Lk)("div",d,[s[3]||(s[3]=(0,t.Lk)("label",{for:"confirmPassword",class:"form-label"},"Répéter le mot de passe",-1)),(0,t.bF)(p,{id:"confirmPassword",name:"confirmPassword",type:"password",class:"form-control",modelValue:c.confirmPassword,"onUpdate:modelValue":s[1]||(s[1]=e=>c.confirmPassword=e),rules:"required|matches:password"},null,8,["modelValue"]),(0,t.bF)(u,{name:"confirmPassword",class:"text-danger"})]),s[4]||(s[4]=(0,t.Lk)("button",{type:"submit",class:"button btn"},"Réinitialiser le mot de passe",-1))])),_:1},8,["onSubmit"])):(0,t.Q3)("",!0),c.message?((0,t.uX)(),(0,t.CE)("div",{key:1,class:(0,r.C4)([m.alertClass,"alert mt-3"])},(0,r.v_)(c.message),3)):(0,t.Q3)("",!0)])])}a(4114);var c=a(4373),m=a(6343);(0,m.Km)("required",(e=>!!e||"Veuillez remplir ce champ correctement.")),(0,m.Km)("min",((e,[s])=>!(e&&e.length<s)||`Veuillez remplir ce champ avec au moins ${s} caractères.`)),(0,m.Km)("matches",((e,[s],a)=>e===a.form[s]||"Les mots de passe ne correspondent pas.")),(0,m.Km)("passwordUppercase",(e=>/[A-Z]/.test(e)||"Le mot de passe doit contenir au moins une lettre majuscule.")),(0,m.Km)("passwordLowercase",(e=>/[a-z]/.test(e)||"Le mot de passe doit contenir au moins une lettre minuscule.")),(0,m.Km)("passwordNumber",(e=>/[0-9]/.test(e)||"Le mot de passe doit contenir au moins un chiffre.")),(0,m.Km)("passwordSpecial",(e=>/[!@#$%^&*(),.?":{}|<>]/.test(e)||"Le mot de passe doit contenir au moins un caractère spécial.")),(0,m.Km)("noSpaces",(e=>!/\s/.test(e)||"Le mot de passe ne doit pas contenir d'espaces."));var p={name:"ResetPassword",components:{Form:m.lV,Field:m.D0,ErrorMessage:m.Kw},data(){return{password:"",confirmPassword:"",message:"",token:this.$route.query.token,tokenValid:!1}},async created(){try{const{data:e}=await c.A.get("https://www.cookaller.com/users/verify-reset-token",{params:{token:this.token},withCredentials:!0});e.success?this.tokenValid=!0:this.message="Le lien de réinitialisation est invalide ou a expiré."}catch(e){this.handleError(e,"Le lien de réinitialisation est invalide ou a expiré.")}},computed:{alertClass(){return this.message.includes("succès")?"alert-success":"alert-danger"}},methods:{async resetPassword(){try{const{data:e}=await c.A.post("https://www.cookaller.com/users/reset-password",{token:this.token,newPassword:this.password},{withCredentials:!0});e.success?(this.message="Mot de passe réinitialisé avec succès. Vous pouvez maintenant vous connecter.",setTimeout((()=>{this.$router.push("/login")}),1500)):this.message="Erreur lors de la réinitialisation du mot de passe."}catch(e){this.handleError(e,"Erreur lors de la réinitialisation du mot de passe.")}},handleError(e,s){e.response&&e.response.data&&e.response.data.message?this.message=e.response.data.message:this.message=s}}},u=a(1241);const w=(0,u.A)(p,[["render",l],["__scopeId","data-v-c5ef0992"]]);var h=w}}]);
//# sourceMappingURL=947.31c81967.js.map